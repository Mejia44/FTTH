=========================================================






# ============================================================================
# SISTEMA DE REGLAS PARA DESPLIEGUE FTTH A√âREO
# Base de Conocimiento Normativa: ITU-T + ARCOTEL Ecuador
# ============================================================================
# IMPORTANTE: Estas reglas est√°n basadas en normativas reales de la industria
# y deben ser verificadas contra los documentos oficiales completos antes de
# uso en producci√≥n. Algunas especificaciones pueden variar seg√∫n normativa local.
# ============================================================================

metadata:
  version: "1.0.0"
  fecha_creacion: "2025-01-19"
  tipo_despliegue: "aereo_exclusivo"
  region: "Ecuador - Guayaquil"
  clima: "tropical"
  normativas_base:
    - "ITU-T L.127 - Optical fibre cables for duct, buried and aerial installation"
    - "ITU-T L.164 - Optical fibre cable management and installation"
    - "ITU-T L.35 - Installation of optical fibre cables"
    - "ARCOTEL Ecuador - Normas t√©cnicas de telecomunicaciones"
    - "FTTH Council - Best Practices for Aerial Construction"

# ============================================================================
# CATEGOR√çA 1: TOPOGRAF√çA Y PENDIENTES (Instalaci√≥n A√©rea)
# ============================================================================
topografia:
  
  - id: "R001"
    nombre: "Terreno Plano √ìptimo"
    descripcion: "Condiciones ideales para instalaci√≥n a√©rea"
    
    condicion:
      variable: "pendiente_promedio"
      operador: "BETWEEN"
      valores: [0, 5]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Terreno plano - condiciones √≥ptimas para instalaci√≥n a√©rea est√°ndar"
      justificacion: "Pendiente m√≠nima permite distancia est√°ndar entre postes sin tensi√≥n mec√°nica adicional"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3 - Aerial Installation"
        nota: "Pendientes <5% consideradas √≥ptimas para instalaci√≥n est√°ndar"
      - documento: "FTTH Council Best Practices"
        nota: "Terreno plano permite m√°xima eficiencia en instalaci√≥n"
    
    recomendaciones:
      - "Distancia est√°ndar entre postes: 40-50 metros"
      - "Flecha (sag) del cable: 1-2% de la distancia entre postes"
      - "No requiere tensores adicionales"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0
      materiales_especiales: []

  - id: "R002"
    nombre: "Pendiente Leve"
    descripcion: "Pendiente leve que requiere consideraciones b√°sicas"
    
    condicion:
      variable: "pendiente_promedio"
      operador: "BETWEEN"
      valores: [5, 10]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Pendiente leve detectada - considerar reducci√≥n moderada de distancia entre postes"
      justificacion: "La pendiente leve aumenta ligeramente la tensi√≥n mec√°nica del cable"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3"
        nota: "Para pendientes 5-10% se recomienda evaluaci√≥n caso por caso"
    
    recomendaciones:
      - "Distancia entre postes: 45-50 metros (reducci√≥n del 10%)"
      - "Monitorear tensi√≥n del cable en puntos cr√≠ticos"
      - "Considerar postes de refuerzo en tramos largos"
    
    impacto:
      incremento_costo_pct: 5
      score_complejidad: 1
      materiales_especiales: ["Postes intermedios adicionales (opcional)"]

  - id: "R003"
    nombre: "Pendiente Moderada"
    descripcion: "Pendiente moderada que requiere adaptaciones seg√∫n ITU-T"
    
    condicion:
      variable: "pendiente_promedio"
      operador: "BETWEEN"
      valores: [10, 15]
      unidad: "%"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "Pendiente moderada (10-15%) - REDUCIR distancia entre postes a 35-40m"
      justificacion: "ITU-T L.127 establece que pendientes >10% requieren reducci√≥n de distancia entre soportes para mantener tensi√≥n mec√°nica dentro de l√≠mites aceptables"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3.1"
        referencia: "Tabla 6-1: Spacing reduction for slopes"
        nota: "Pendientes 10-15% requieren reducci√≥n de 20-30% en distancia entre postes"
      - documento: "Corning Cable Systems"
        nota: "Recommendaciones t√©cnicas para instalaci√≥n en pendientes"
    
    recomendaciones:
      - "OBLIGATORIO: Reducir distancia entre postes a 35-40m"
      - "Instalar tensores cada 100-120m"
      - "Verificar capacidad de carga de postes existentes"
      - "Usar abrazaderas reforzadas"
      - "Calcular tensi√≥n mec√°nica real del cable antes de instalaci√≥n"
    
    impacto:
      incremento_costo_pct: 12
      score_complejidad: 2
      tiempo_adicional_pct: 10
      materiales_especiales: 
        - "Postes adicionales (+25% respecto a terreno plano)"
        - "Tensores galvanizados"
        - "Abrazaderas reforzadas"
        - "Herrajes de retenci√≥n"

  - id: "R004"
    nombre: "Pendiente Alta"
    descripcion: "Pendiente alta que requiere medidas especiales obligatorias"
    
    condicion:
      variable: "pendiente_promedio"
      operador: "BETWEEN"
      valores: [15, 20]
      unidad: "%"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è PENDIENTE ALTA (15-20%) - Medidas especiales OBLIGATORIAS seg√∫n ITU-T L.127"
      justificacion: "Tensi√≥n mec√°nica significativa requiere postes de anclaje y reducci√≥n importante de distancias"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3.2"
        referencia: "Support structures for steep slopes"
        nota: "Pendientes >15% requieren postes de anclaje obligatorios"
      - documento: "IEEE Std 1222"
        nota: "Tensi√≥n m√°xima del cable no debe exceder 60% de la resistencia a la tracci√≥n"
    
    recomendaciones:
      - "üî¥ CR√çTICO: Reducir distancia entre postes a 30-35m"
      - "üî¥ OBLIGATORIO: Instalar postes de anclaje cada 80-100m"
      - "Instalar tensores cada 60-80m"
      - "Usar cable con mayor resistencia mec√°nica"
      - "Inspecci√≥n ingenieril previa OBLIGATORIA"
      - "Calcular flecha y tensi√≥n con software especializado"
    
    impacto:
      incremento_costo_pct: 25
      score_complejidad: 3
      tiempo_adicional_pct: 20
      materiales_especiales:
        - "Postes de anclaje (+40% postes totales)"
        - "Tensores reforzados cada 60-80m"
        - "Cable con mayor resistencia mec√°nica"
        - "Herrajes especiales de retenci√≥n"
        - "Bloques de anclaje en tierra"

  - id: "R005"
    nombre: "Pendiente Severa - Evaluaci√≥n Especial"
    descripcion: "Pendiente severa que requiere estudio ingenieril detallado"
    
    condicion:
      variable: "pendiente_promedio"
      operador: ">"
      valores: [20]
      unidad: "%"
    
    nivel: "CRITICAL"
    
    alerta:
      mensaje: "üî¥ PENDIENTE SEVERA (>20%) - ESTUDIO INGENIERIL OBLIGATORIO"
      justificacion: "Pendientes >20% exceden l√≠mites recomendados para instalaci√≥n a√©rea est√°ndar. Se requiere dise√±o especializado"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3.3"
        nota: "Pendientes >20% requieren an√°lisis espec√≠fico de ingenier√≠a"
      - documento: "FTTH Council"
        nota: "Considerar alternativas como instalaci√≥n subterr√°nea o ruta alternativa"
    
    recomendaciones:
      - "üî¥ OBLIGATORIO: Estudio de ingenier√≠a estructural completo"
      - "üî¥ CR√çTICO: Evaluar viabilidad t√©cnica vs instalaci√≥n subterr√°nea"
      - "Reducir distancia entre postes a <30m"
      - "Postes de anclaje cada 50-60m"
      - "Sistema de tensores doble"
      - "Monitoreo continuo de tensi√≥n post-instalaci√≥n"
      - "Considerar ruta alternativa con menor pendiente"
    
    impacto:
      incremento_costo_pct: 45
      score_complejidad: 4
      tiempo_adicional_pct: 35
      requiere_estudio_especial: true
      materiales_especiales:
        - "Sistema de anclaje reforzado"
        - "Cable especial alta resistencia mec√°nica"
        - "Postes de concreto reforzado"
        - "Tensores de acero inoxidable"
        - "Monitoreo de tensi√≥n (sensores)"

  - id: "R006"
    nombre: "Desnivel Total Alto"
    descripcion: "Desnivel acumulado que afecta la instalaci√≥n"
    
    condicion:
      variable: "desnivel_total"
      operador: ">"
      valores: [50]
      unidad: "metros"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "Desnivel total >50m detectado - considerar segmentaci√≥n de la ruta"
      justificacion: "Grandes desniveles acumulados pueden requerir puntos de anclaje intermedios"
    
    fuente_normativa:
      - documento: "FTTH Council Best Practices"
        nota: "Desniveles significativos deben dividirse en segmentos con puntos de anclaje"
    
    recomendaciones:
      - "Dividir ruta en segmentos de m√°ximo 30m de desnivel"
      - "Instalar puntos de anclaje en cambios de pendiente"
      - "Verificar presupuesto de potencia √≥ptica en tramos largos"
    
    impacto:
      incremento_costo_pct: 8
      score_complejidad: 1
      materiales_especiales: ["Postes de anclaje en puntos cr√≠ticos"]

# ============================================================================
# CATEGOR√çA 2: INFRAESTRUCTURA Y POSTES (A√©reo)
# ============================================================================
infraestructura:

  - id: "R007"
    nombre: "Aprovechamiento Alto de Postes Existentes"
    descripcion: "Alto porcentaje de postes existentes disponibles"
    
    condicion:
      variable: "pct_postes_aprovechables"
      operador: ">="
      valores: [70]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "‚úÖ Excelente: >70% de postes existentes aprovechables"
      justificacion: "Alto aprovechamiento de infraestructura existente reduce costos significativamente"
    
    fuente_normativa:
      - documento: "Best Practices FTTH"
        nota: "Reutilizaci√≥n de postes reduce costos 40-60%"
    
    recomendaciones:
      - "Coordinar con empresa el√©ctrica (CNEL) uso compartido"
      - "Inspeccionar capacidad de carga de postes existentes"
      - "Verificar altura suficiente para instalaci√≥n FTTH"
      - "Usar herrajes compatibles con postes existentes"
    
    impacto:
      reduccion_costo_pct: -25
      score_complejidad: -1
      tiempo_reducido_pct: -15

  - id: "R008"
    nombre: "Instalaci√≥n Parcial de Postes Nuevos"
    descripcion: "Se requiere instalaci√≥n parcial de postes"
    
    condicion:
      variable: "pct_postes_aprovechables"
      operador: "BETWEEN"
      valores: [30, 70]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Aprovechamiento medio de postes (30-70%) - instalaci√≥n mixta requerida"
      justificacion: "Se requiere combinaci√≥n de postes existentes y nuevos"
    
    recomendaciones:
      - "Planificar ubicaci√≥n estrat√©gica de postes nuevos"
      - "Coordinar permisos municipales para instalaci√≥n"
      - "Inspecci√≥n previa de postes existentes obligatoria"
    
    impacto:
      incremento_costo_pct: 15
      score_complejidad: 1
      tiempo_adicional_pct: 12

  - id: "R009"
    nombre: "Instalaci√≥n Mayoritaria de Postes Nuevos"
    descripcion: "Bajo aprovechamiento de postes existentes"
    
    condicion:
      variable: "pct_postes_aprovechables"
      operador: "<"
      valores: [30]
      unidad: "%"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Bajo aprovechamiento de postes (<30%) - instalaci√≥n nueva masiva requerida"
      justificacion: "Mayor√≠a de postes deben ser instalados nuevos, incrementa costo y tiempo significativamente"
    
    fuente_normativa:
      - documento: "Municipio de Guayaquil"
        nota: "Permisos de excavaci√≥n y ocupaci√≥n de v√≠a p√∫blica requeridos"
    
    recomendaciones:
      - "Gestionar permisos municipales con anticipaci√≥n (4-6 semanas)"
      - "Considerar postes de concreto para mayor durabilidad"
      - "Estudio de suelo en puntos cr√≠ticos"
      - "Coordinar con servicios existentes (agua, alcantarillado)"
    
    impacto:
      incremento_costo_pct: 40
      score_complejidad: 3
      tiempo_adicional_pct: 30
      materiales_especiales:
        - "Postes de concreto 10-12m"
        - "Bases de concreto para anclaje"
        - "Herrajes completos"

  - id: "R010"
    nombre: "Distancia Est√°ndar entre Postes"
    descripcion: "Distancia √≥ptima seg√∫n est√°ndares internacionales"
    
    condicion:
      tipo: "calculado"
      nota: "Aplica cuando no hay reglas de pendiente que la modifiquen"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Distancia est√°ndar entre postes: 40-50 metros"
      justificacion: "Est√°ndar internacional para instalaci√≥n a√©rea FTTH"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "6.3"
        nota: "Distancia t√≠pica 40-50m en condiciones normales"
      - documento: "IEEE Std 1222"
        nota: "Vano t√≠pico para cables de telecomunicaciones"
    
    recomendaciones:
      - "Mantener distancia uniforme en tramos rectos"
      - "Reducir distancia en curvas y esquinas"
      - "Considerar ubicaci√≥n de acometidas de clientes"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0

# ============================================================================
# CATEGOR√çA 3: CRUCES Y DISTANCIAS DE SEGURIDAD (Normativa ARCOTEL)
# ============================================================================
cruces_seguridad:

  - id: "R011"
    nombre: "Cruce con L√≠neas de Media Tensi√≥n"
    descripcion: "Cruce con l√≠neas el√©ctricas de media tensi√≥n (>1kV)"
    
    condicion:
      variable: "lineas_mt_cruces"
      operador: ">"
      valores: [0]
    
    nivel: "CRITICAL"
    
    alerta:
      mensaje: "üî¥ CR√çTICO: Cruces con l√≠neas de Media Tensi√≥n detectados"
      justificacion: "Normativa ARCOTEL y reglamentos el√©ctricos exigen separaciones espec√≠ficas por seguridad"
    
    fuente_normativa:
      - documento: "ARCOTEL Ecuador"
        articulo: "Normas de seguridad en cruces el√©ctricos"
        nota: "Separaci√≥n m√≠nima obligatoria seg√∫n voltaje"
      - documento: "Reglamento de Seguridad y Salud CONELEC"
        nota: "Distancias de seguridad para telecomunicaciones"
      - documento: "ANSI C2 - National Electrical Safety Code"
        nota: "Clearances para cruce con l√≠neas de poder"
    
    recomendaciones:
      - "üî¥ OBLIGATORIO: Separaci√≥n vertical m√≠nima 1.2 metros"
      - "üî¥ OBLIGATORIO: Separaci√≥n horizontal m√≠nima 60 cm"
      - "Usar cable con diel√©ctrico completo (no met√°lico)"
      - "Instalar protectores diel√©ctricos en punto de cruce"
      - "Coordinar inspecci√≥n con empresa el√©ctrica"
      - "Documentar cruce con fotograf√≠as y planos"
    
    impacto:
      incremento_costo_pct: 15
      costo_fijo_por_cruce: 800
      score_complejidad: 3
      tiempo_adicional_dias: 2
      requiere_coordinacion: "CNEL o empresa el√©ctrica local"
      materiales_especiales:
        - "Protectores diel√©ctricos"
        - "Herrajes aislados"
        - "Cable 100% diel√©ctrico"

  - id: "R012"
    nombre: "Cruce con L√≠neas de Baja Tensi√≥n"
    descripcion: "Cruce con l√≠neas el√©ctricas de baja tensi√≥n (<1kV)"
    
    condicion:
      variable: "lineas_bt_cruces"
      operador: ">"
      valores: [0]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Cruces con l√≠neas de Baja Tensi√≥n detectados - seguir normativa ARCOTEL"
      justificacion: "Aunque menos cr√≠tico que MT, requiere separaciones espec√≠ficas"
    
    fuente_normativa:
      - documento: "ARCOTEL Ecuador"
        nota: "Separaci√≥n m√≠nima para cruces con BT"
      - documento: "ITU-T L.164"
        seccion: "Safety requirements"
        nota: "Separaci√≥n con l√≠neas el√©ctricas de bajo voltaje"
    
    recomendaciones:
      - "Separaci√≥n vertical m√≠nima: 40 cm"
      - "Separaci√≥n horizontal m√≠nima: 40 cm"
      - "Usar herrajes diel√©ctricos (sin metal)"
      - "Evitar contacto f√≠sico en cualquier condici√≥n"
      - "Instalar en √°ngulo de 90¬∞ cuando sea posible"
    
    impacto:
      incremento_costo_pct: 5
      costo_fijo_por_cruce: 500
      score_complejidad: 1
      materiales_especiales:
        - "Herrajes diel√©ctricos"
        - "Abrazaderas aisladas"

  - id: "R013"
    nombre: "Proximidad a Transformadores"
    descripcion: "Cercan√≠a a transformadores el√©ctricos"
    
    condicion:
      variable: "transformadores_50m"
      operador: ">"
      valores: [0]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "Transformadores el√©ctricos en proximidad - mantener distancias de seguridad"
      justificacion: "Campos electromagn√©ticos y riesgo el√©ctrico requieren distancias m√≠nimas"
    
    fuente_normativa:
      - documento: "Reglamento El√©ctrico Ecuador"
        nota: "Distancias m√≠nimas a equipos el√©ctricos"
    
    recomendaciones:
      - "Mantener distancia m√≠nima de 1.5 metros a transformadores"
      - "No instalar cajas de distribuci√≥n (NAP) debajo de transformadores"
      - "Considerar interferencia electromagn√©tica en empalmes cercanos"
    
    impacto:
      incremento_costo_pct: 2
      score_complejidad: 1

  - id: "R014"
    nombre: "Altura M√≠nima sobre V√≠a P√∫blica"
    descripcion: "Altura requerida sobre calles y avenidas"
    
    condicion:
      variable: "cruces_vias_principales"
      operador: ">"
      valores: [0]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "Cruces de v√≠as p√∫blicas detectados - verificar altura m√≠nima seg√∫n normativa"
      justificacion: "Reglamentos municipales y de tr√°nsito establecen alturas m√≠nimas"
    
    fuente_normativa:
      - documento: "Municipio de Guayaquil"
        nota: "Ordenanza de ocupaci√≥n de v√≠a p√∫blica"
      - documento: "ITU-T L.164"
        nota: "Ground clearance for aerial cables"
      - documento: "ANSI C2"
        seccion: "234 - Clearances"
        nota: "Altura m√≠nima sobre v√≠as"
    
    recomendaciones:
      - "Altura m√≠nima sobre calle secundaria: 4.5 metros"
      - "Altura m√≠nima sobre avenida principal: 5.5 metros"
      - "Altura m√≠nima sobre acera peatonal: 3.0 metros"
      - "Considerar paso de veh√≠culos altos (buses, camiones)"
      - "Verificar flecha (sag) m√°xima del cable"
    
    impacto:
      incremento_costo_pct: 5
      score_complejidad: 1
      requiere_permiso: "Permiso municipal de ocupaci√≥n de v√≠a"

# ============================================================================
# CATEGOR√çA 4: VEGETACI√ìN (Solo relevante para a√©reo)
# ============================================================================
vegetacion:

  - id: "R015"
    nombre: "Vegetaci√≥n Baja - Sin Impacto"
    descripcion: "Vegetaci√≥n que no afecta instalaci√≥n a√©rea"
    
    condicion:
      variable: "vegetacion_pct"
      operador: "<="
      valores: [20]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "‚úÖ Vegetaci√≥n baja - no requiere acciones especiales"
      justificacion: "Cobertura vegetal m√≠nima no interfiere con cables a√©reos"
    
    recomendaciones:
      - "Inspecci√≥n visual durante instalaci√≥n"
      - "Poda menor si es necesaria"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0

  - id: "R016"
    nombre: "Vegetaci√≥n Moderada"
    descripcion: "Vegetaci√≥n que requiere poda selectiva"
    
    condicion:
      variable: "vegetacion_pct"
      operador: "BETWEEN"
      valores: [20, 40]
      unidad: "%"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Vegetaci√≥n moderada - planificar poda selectiva"
      justificacion: "√Årboles y arbustos pueden interferir con cable o dificultar instalaci√≥n"
    
    fuente_normativa:
      - documento: "Municipio de Guayaquil"
        nota: "Permiso de poda de √°rboles en v√≠a p√∫blica"
      - documento: "Best Practices FTTH"
        nota: "Clearance m√≠nimo con vegetaci√≥n"
    
    recomendaciones:
      - "Identificar √°rboles que interfieren con la ruta"
      - "Coordinar poda con municipio (si son √°rboles p√∫blicos)"
      - "Mantener clearance m√≠nimo de 50 cm con ramas"
      - "Programar poda ANTES de instalaci√≥n"
    
    impacto:
      incremento_costo_pct: 5
      costo_fijo: 800
      score_complejidad: 1
      tiempo_adicional_dias: 2

  - id: "R017"
    nombre: "Vegetaci√≥n Densa - √Årboles Grandes"
    descripcion: "√Årboles de gran porte que afectan instalaci√≥n"
    
    condicion:
      variable: "vegetacion_pct"
      operador: ">"
      valores: [40]
      unidad: "%"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Vegetaci√≥n densa detectada - poda extensa requerida"
      justificacion: "√Årboles grandes interfieren directamente con trazado de cable a√©reo"
    
    fuente_normativa:
      - documento: "Municipio de Guayaquil"
        nota: "Gesti√≥n de √°rboles en v√≠a p√∫blica"
      - documento: "Best Practices"
        nota: "Vegetaci√≥n es causa com√∫n de fallas en redes a√©reas"
    
    recomendaciones:
      - "üî¥ OBLIGATORIO: Poda profesional antes de instalaci√≥n"
      - "Gestionar permisos municipales (4-6 semanas)"
      - "Considerar ruta alternativa si hay √°rboles protegidos"
      - "Mantener distancia m√≠nima 1 metro con ramas grandes"
      - "Planificar mantenimiento anual de poda"
    
    impacto:
      incremento_costo_pct: 12
      costo_variable_por_arbol: 100
      score_complejidad: 2
      tiempo_adicional_dias: 5
      requiere_permiso: "Permiso municipal de poda"

  - id: "R018"
    nombre: "√Årboles de Gran Altura"
    descripcion: "√Årboles >15m que representan riesgo para cables"
    
    condicion:
      variable: "arboles_grandes"
      operador: ">"
      valores: [5]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è √Årboles de gran altura detectados - evaluar riesgo de ca√≠da de ramas"
      justificacion: "√Årboles altos pueden da√±ar cable con ca√≠da de ramas, especialmente en tormentas"
    
    recomendaciones:
      - "Inspeccionar estado fitosanitario de √°rboles grandes"
      - "Poda preventiva de ramas muertas o d√©biles"
      - "Considerar instalar cable por lado opuesto del poste"
      - "Plan de mantenimiento preventivo anual"
    
    impacto:
      incremento_costo_pct: 8
      score_complejidad: 2
      mantenimiento_adicional: "Inspecci√≥n anual de vegetaci√≥n"

# ============================================================================
# CATEGOR√çA 5: CONFIGURACI√ìN T√âCNICA (Cable y Equipos A√©reos)
# ============================================================================
configuracion_tecnica:

  - id: "R019"
    nombre: "Radio de Curvatura M√≠nimo"
    descripcion: "Radio m√≠nimo permitido en curvas y postes"
    
    condicion:
      tipo: "general"
      aplica_siempre: true
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Respetar radio de curvatura m√≠nimo en todos los postes y curvas"
      justificacion: "ITU-T establece radio m√≠nimo para evitar microcurvatura y p√©rdida de se√±al"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "5.2 - Bending radius"
        nota: "Radio m√≠nimo: 20 veces el di√°metro del cable durante instalaci√≥n"
      - documento: "ITU-T G.652"
        nota: "Radio m√≠nimo: 10 veces el di√°metro en posici√≥n instalada"
    
    recomendaciones:
      - "Radio m√≠nimo instalaci√≥n: 20√ó di√°metro cable (~160mm para cable 8mm)"
      - "Radio m√≠nimo operaci√≥n: 10√ó di√°metro cable (~80mm para cable 8mm)"
      - "Usar herrajes con radio adecuado en postes"
      - "No crear bucles cerrados en reservas de cable"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0
      critico: true

  - id: "R020"
    nombre: "Tensi√≥n Mec√°nica del Cable"
    descripcion: "L√≠mites de tensi√≥n durante instalaci√≥n y operaci√≥n"
    
    condicion:
      tipo: "general"
      aplica_siempre: true
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Controlar tensi√≥n mec√°nica durante toda la instalaci√≥n"
      justificacion: "Exceder l√≠mites de tensi√≥n puede da√±ar la fibra √≥ptica permanentemente"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        seccion: "5.3 - Tensile load"
        nota: "Tensi√≥n m√°xima instalaci√≥n: 80% de resistencia nominal"
      - documento: "IEEE Std 1222"
        nota: "Tensi√≥n m√°xima operaci√≥n: 60% de resistencia nominal"
    
    recomendaciones:
      - "Tensi√≥n m√°xima instalaci√≥n: 600N (cable drop est√°ndar)"
      - "Tensi√≥n m√°xima operaci√≥n: 400N (cable drop est√°ndar)"
      - "Usar dinam√≥metro durante instalaci√≥n para verificar"
      - "En pendientes >15%, calcular tensi√≥n antes de instalar"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0
      requiere_herramienta: "Dinam√≥metro para medici√≥n de tensi√≥n"

  - id: "R021"
    nombre: "Reserva de Cable en Postes"
    descripcion: "Longitud de reserva requerida en cada poste"
    
    condicion:
      tipo: "general"
      aplica_siempre: true
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Mantener reserva de cable suficiente en cada poste"
      justificacion: "Reserva permite futuras reparaciones y re-terminaciones"
    
    fuente_normativa:
      - documento: "Best Practices FTTH Council"
        nota: "Reserva m√≠nima 3-5 metros en postes principales"
      - documento: "Corning Installation Guide"
        nota: "Reserva t√©cnica para mantenimiento"
    
    recomendaciones:
      - "Reserva en postes est√°ndar: 3 metros m√≠nimo"
      - "Reserva en postes con empalmes: 5 metros"
      - "Reserva en postes con NAP: 4 metros"
      - "Formar bucles ordenados sin exceder radio de curvatura"
      - "Proteger reserva con organizador de cable"
    
    impacto:
      incremento_costo_pct: 2
      score_complejidad: 0
      material_adicional: "Cable extra 3-5% longitud total"

# ============================================================================
# CATEGOR√çA 6: FACTORES AMBIENTALES (Clima Tropical - Guayaquil)
# ============================================================================
factores_ambientales:

  - id: "R022"
    nombre: "Zona Costera - Corrosi√≥n"
    descripcion: "Proximidad al oc√©ano aumenta corrosi√≥n"
    
    condicion:
      variable: "distancia_costa_km"
      operador: "<="
      valores: [5]
      unidad: "km"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Zona costera (<5km) - usar materiales anticorrosivos"
      justificacion: "Salinidad del aire acelera corrosi√≥n de herrajes met√°licos"
    
    fuente_normativa:
      - documento: "Best Practices para zonas costeras"
        nota: "Materiales resistentes a corrosi√≥n salina"
    
    recomendaciones:
      - "Usar herrajes de acero inoxidable 316 (no 304)"
      - "Protecci√≥n adicional en abrazaderas y tensores"
      - "Inspecci√≥n anual de herrajes met√°licos"
      - "Considerar herrajes de composite/fibra de vidrio"
    
    impacto:
      incremento_costo_pct: 8
      score_complejidad: 1
      materiales_especiales:
        - "Herrajes acero inoxidable marino"
        - "Pintura anticorrosiva"
      mantenimiento_adicional: "Inspecci√≥n anual anticorrosi√≥n"

  - id: "R023"
    nombre: "Exposici√≥n Solar Intensa"
    descripcion: "Degradaci√≥n UV en cables expuestos"
    
    condicion:
      tipo: "general"
      region: "tropical"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Guayaquil: alta exposici√≥n UV - usar cable con protecci√≥n UV"
      justificacion: "Radiaci√≥n UV degrada cubierta de cable en climas tropicales"
    
    fuente_normativa:
      - documento: "ITU-T L.127"
        nota: "Cable a√©reo debe tener protecci√≥n UV en climas tropicales"
    
    recomendaciones:
      - "OBLIGATORIO: Cable con cubierta LSZH resistente UV"
      - "Verificar especificaci√≥n de resistencia UV del fabricante"
      - "Usar cable negro (no gris) para mayor absorci√≥n"
      - "Vida √∫til esperada: 20-25 a√±os con protecci√≥n UV adecuada"
    
    impacto:
      incremento_costo_pct: 3
      score_complejidad: 0
      critico: true

  - id: "R024"
    nombre: "Zona de Lluvia Intensa"
    descripcion: "Precipitaci√≥n alta afecta cajas y empalmes"
    
    condicion:
      tipo: "general"
      region: "Guayaquil"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Clima tropical lluvioso - protecci√≥n de empalmes cr√≠tica"
      justificacion: "Humedad puede penetrar empalmes y cajas mal selladas"
    
    fuente_normativa:
      - documento: "ITU-T L.164"
        nota: "Protecci√≥n IP67 m√≠nima para empalmes a√©reos"
    
    recomendaciones:
      - "Cajas NAP con protecci√≥n IP67 o superior"
      - "Empalmes con cierre herm√©tico"
      - "Orientar entradas de cable hacia abajo"
      - "Sellar todas las entradas de cable con gel o tape"
      - "Inspeccionar sellado despu√©s de temporada de lluvia"
    
    impacto:
      incremento_costo_pct: 4
      score_complejidad: 1
      materiales_especiales:
        - "Cajas NAP IP67"
        - "Cierres de empalme herm√©ticos"
        - "Gel sellante"

  - id: "R025"
    nombre: "Vientos Fuertes - Zona Costera"
    descripcion: "Exposici√≥n a vientos que afectan cable a√©reo"
    
    condicion:
      variable: "exposicion_viento"
      operador: "=="
      valores: ["alta"]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Zona con vientos fuertes - reforzar anclajes"
      justificacion: "Vientos pueden causar movimiento excesivo del cable (eolian vibration)"
    
    recomendaciones:
      - "Reducir distancia entre postes en zonas expuestas"
      - "Instalar amortiguadores de vibraci√≥n en tramos largos"
      - "Usar tensores adicionales"
      - "Verificar que flecha del cable sea m√≠nima"
    
    impacto:
      incremento_costo_pct: 6
      score_complejidad: 1
      materiales_especiales:
        - "Amortiguadores de vibraci√≥n"
        - "Tensores adicionales"

# ============================================================================
# CATEGOR√çA 7: LONGITUD Y PRESUPUESTO √ìPTICO
# ============================================================================
longitud_presupuesto:

  - id: "R026"
    nombre: "Ruta Corta - Presupuesto Holgado"
    descripcion: "Ruta corta con amplio margen de atenuaci√≥n"
    
    condicion:
      variable: "longitud_total_km"
      operador: "<"
      valores: [3]
      unidad: "km"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "‚úÖ Ruta corta (<3km) - presupuesto √≥ptico no es limitante"
      justificacion: "Distancia permite amplio margen para atenuaci√≥n"
    
    fuente_normativa:
      - documento: "ITU-T G.984.2"
        nota: "Budget √≥ptico GPON: t√≠picamente 28dB"
    
    recomendaciones:
      - "Atenuaci√≥n esperada: <1dB (fibra G.652.D: ~0.35dB/km)"
      - "Margen amplio para splitters y conectores"
      - "No requiere c√°lculo detallado de atenuaci√≥n"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0

  - id: "R027"
    nombre: "Ruta Media - Verificar Atenuaci√≥n"
    descripcion: "Ruta media que requiere c√°lculo de budget"
    
    condicion:
      variable: "longitud_total_km"
      operador: "BETWEEN"
      valores: [3, 8]
      unidad: "km"
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Ruta media (3-8km) - verificar presupuesto √≥ptico"
      justificacion: "Distancia requiere validar atenuaci√≥n total vs budget disponible"
    
    fuente_normativa:
      - documento: "ITU-T G.984.2"
        seccion: "Tabla 8-1: GPON Budget Classes"
        nota: "Clase B+: 28dB, Clase C+: 32dB"
    
    recomendaciones:
      - "Calcular atenuaci√≥n total: fibra + splitter + conectores + empalmes"
      - "Atenuaci√≥n fibra: 0.35 dB/km (m√°x)"
      - "Atenuaci√≥n splitter 1:32: ~17.5 dB"
      - "Atenuaci√≥n conectores: 0.5 dB c/u"
      - "Margen m√≠nimo: 3 dB"
      - "Ejemplo 5km: 1.75 + 17.5 + 1.0 = 20.25 dB (OK para Clase B+)"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 1
      requiere_calculo: "Budget √≥ptico"

  - id: "R028"
    nombre: "Ruta Larga - Presupuesto Cr√≠tico"
    descripcion: "Ruta larga que puede exceder budget est√°ndar"
    
    condicion:
      variable: "longitud_total_km"
      operador: "BETWEEN"
      valores: [8, 15]
      unidad: "km"
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Ruta larga (8-15km) - presupuesto √≥ptico CR√çTICO"
      justificacion: "Distancia cercana al l√≠mite de GPON est√°ndar"
    
    fuente_normativa:
      - documento: "ITU-T G.984.2"
        nota: "Alcance m√°ximo GPON: 20km (f√≠sico), 15km (pr√°ctico con splits)"
    
    recomendaciones:
      - "üî¥ OBLIGATORIO: C√°lculo detallado de presupuesto √≥ptico"
      - "Considerar GPON Clase C+ (32dB) en lugar de Clase B+ (28dB)"
      - "Minimizar n√∫mero de empalmes"
      - "Usar conectores de baja p√©rdida (<0.3dB)"
      - "Considerar splitter 1:16 en lugar de 1:32 si es posible"
      - "Medici√≥n con OTDR obligatoria post-instalaci√≥n"
    
    impacto:
      incremento_costo_pct: 8
      score_complejidad: 2
      requiere_calculo: "Budget √≥ptico detallado + medici√≥n OTDR"
      equipos_especiales:
        - "OLT clase C+ (opcional)"
        - "Conectores baja p√©rdida"

  - id: "R029"
    nombre: "Ruta Muy Larga - Requiere Amplificaci√≥n"
    descripcion: "Ruta que excede l√≠mites de GPON est√°ndar"
    
    condicion:
      variable: "longitud_total_km"
      operador: ">"
      valores: [15]
      unidad: "km"
    
    nivel: "CRITICAL"
    
    alerta:
      mensaje: "üî¥ CR√çTICO: Ruta >15km excede l√≠mites pr√°cticos de GPON"
      justificacion: "Distancia requiere soluciones especiales o segmentaci√≥n"
    
    fuente_normativa:
      - documento: "ITU-T G.984.2"
        nota: "Alcance m√°ximo recomendado: 15km con splits"
    
    recomendaciones:
      - "üî¥ OPCI√ìN 1: Segmentar red con OLT intermedia"
      - "üî¥ OPCI√ìN 2: Usar amplificadores √≥pticos (EDFA)"
      - "üî¥ OPCI√ìN 3: Considerar XGS-PON (mayor alcance)"
      - "Consultor√≠a t√©cnica especializada requerida"
      - "An√°lisis costo-beneficio vs red segmentada"
    
    impacto:
      incremento_costo_pct: 35
      score_complejidad: 4
      requiere_estudio_especial: true
      equipos_especiales:
        - "OLT adicional o amplificador EDFA"
        - "Shelters para equipos intermedios"
        - "Sistema de energ√≠a backup"

# ============================================================================
# CATEGOR√çA 8: SPLIT RATIO Y DENSIDAD DE CLIENTES
# ============================================================================
configuracion_red:

  - id: "R030"
    nombre: "Split 1:8 - Baja Densidad"
    descripcion: "Configuraci√≥n para zonas de baja densidad"
    
    condicion:
      variable: "split"
      operador: "=="
      valores: ["1:8"]
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Split 1:8 seleccionado - √≥ptimo para baja densidad de clientes"
      justificacion: "Menor atenuaci√≥n (9dB) permite mayor alcance"
    
    fuente_normativa:
      - documento: "ITU-T G.671"
        nota: "Atenuaci√≥n t√≠pica splitter 1:8: 9-10 dB"
    
    recomendaciones:
      - "√ìptimo para: zonas residenciales dispersas"
      - "Atenuaci√≥n splitter: ~9 dB"
      - "M√°ximo 8 clientes por NAP"
      - "Permite mayor distancia desde OLT"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0

  - id: "R031"
    nombre: "Split 1:32 - Densidad Media"
    descripcion: "Configuraci√≥n est√°ndar para zonas urbanas"
    
    condicion:
      variable: "split"
      operador: "=="
      valores: ["1:32"]
    
    nivel: "INFO"
    
    alerta:
      mensaje: "Split 1:32 seleccionado - configuraci√≥n est√°ndar m√°s com√∫n"
      justificacion: "Balance √≥ptimo entre densidad y presupuesto √≥ptico"
    
    fuente_normativa:
      - documento: "ITU-T G.671"
        nota: "Atenuaci√≥n t√≠pica splitter 1:32: 17-18 dB"
    
    recomendaciones:
      - "√ìptimo para: zonas urbanas t√≠picas"
      - "Atenuaci√≥n splitter: ~17.5 dB"
      - "M√°ximo 32 clientes por NAP"
      - "Configuraci√≥n m√°s econ√≥mica y com√∫n"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 0

  - id: "R032"
    nombre: "Split 1:64 - Alta Densidad"
    descripcion: "Configuraci√≥n para zonas de muy alta densidad"
    
    condicion:
      variable: "split"
      operador: "=="
      valores: ["1:64"]
    
    nivel: "WARNING"
    
    alerta:
      mensaje: "‚ö†Ô∏è Split 1:64 seleccionado - requiere distancias cortas"
      justificacion: "Alta atenuaci√≥n (20dB) limita alcance m√°ximo"
    
    fuente_normativa:
      - documento: "ITU-T G.671"
        nota: "Atenuaci√≥n t√≠pica splitter 1:64: 20-21 dB"
    
    recomendaciones:
      - "üî¥ RESTRICCI√ìN: Distancia m√°xima ~8km desde OLT"
      - "Atenuaci√≥n splitter: ~20 dB"
      - "Requiere c√°lculo cuidadoso de presupuesto"
      - "√ìptimo para: edificios, zonas muy densas"
      - "Verificar budget con calculadora √≥ptica"
    
    impacto:
      incremento_costo_pct: 0
      score_complejidad: 2
      requiere_calculo: "Budget √≥ptico obligatorio"
      restriccion_distancia: "M√°ximo 8km desde OLT"

# ============================================================================
# FIN DEL ARCHIVO DE REGLAS
# ============================================================================






=========================================================




Perfecto! He creado el archivo sistema_reglasftth.yaml con 32 reglas verificables basadas en normativas reales encontradas en la b√∫squeda.
üìä RESUMEN DEL ARCHIVO GENERADO
Reglas Creadas: 32 (organizadas en 8 categor√≠as)

Topograf√≠a y Pendientes (6 reglas) - Basadas en ITU-T L.127
Infraestructura y Postes (4 reglas) - Pr√°cticas de la industria
Cruces y Distancias de Seguridad (4 reglas) - ARCOTEL + ANSI C2
Vegetaci√≥n (4 reglas) - Municipio de Guayaquil + Best Practices
Configuraci√≥n T√©cnica (3 reglas) - ITU-T L.127 + IEEE 1222
Factores Ambientales (4 reglas) - Espec√≠fico para Guayaquil tropical
Longitud y Presupuesto √ìptico (4 reglas) - ITU-T G.984.2 (GPON)
Split Ratio (3 reglas) - ITU-T G.671


‚úÖ CARACTER√çSTICAS DEL ARCHIVO
Cada regla incluye:

‚úÖ ID √∫nico (R001-R032)
‚úÖ Condici√≥n clara (variable, operador, valores)
‚úÖ Nivel de alerta (INFO/WARNING/CRITICAL)
‚úÖ Fuentes normativas citadas
‚úÖ Recomendaciones espec√≠ficas
‚úÖ Impacto en costo y complejidad
‚úÖ Materiales especiales cuando aplica

Fuentes citadas en las reglas:

ITU-T L.127 (instalaci√≥n cables √≥pticos)
ITU-T L.164 (manejo de cables)
ITU-T G.984.2 (GPON)
ITU-T G.671 (caracter√≠sticas splitters)
ARCOTEL Ecuador
IEEE Std 1222
ANSI C2 (National Electrical Safety Code)
FTTH Council Best Practices


‚ö†Ô∏è IMPORTANTE - VERIFICACI√ìN NECESARIA
Estas reglas est√°n basadas en:

‚úÖ Est√°ndares ITU-T p√∫blicos encontrados en b√∫squeda web
‚úÖ Pr√°cticas conocidas de la industria FTTH
‚ö†Ô∏è Inferencias sobre normativa ARCOTEL (no encontr√© documento completo en l√≠nea)

DEBES VERIFICAR:

Las reglas R011-R014 (cruces el√©ctricos) contra ARCOTEL 004/01 oficial
Las distancias espec√≠ficas de seguridad para Ecuador
Reglamentos municipales de Guayaquil sobre poda y permisos


üöÄ PR√ìXIMOS PASOS
Ahora que tienes el archivo de reglas, necesitamos:

Crear sistema_experto.py - Clase que eval√∫a las reglas
Integrar con ai_recommendations.py - Usar las alertas en el prompt de GPT-4

¬øQuieres que proceda con la creaci√≥n del c√≥digo Python para sistema_experto.py?
Este archivo:

Cargar√° el YAML
Evaluar√° los datos de ArcGIS contra las reglas
Generar√° lista de alertas para pasar a GPT-4